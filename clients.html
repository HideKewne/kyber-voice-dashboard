<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kyber - Clients</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
/* ========================================
   Kyber Dashboard - Clients Page
   Based on v8 design system
   ======================================== */

/* ========================================
   LIGHT THEME (Default) - White/Blue
   ======================================== */
:root {
    /* Primary Colors - Blue */
    --primary-500: #3B82F6;
    --primary-600: #2563EB;
    --primary-400: #60A5FA;
    --primary-100: #DBEAFE;

    /* Neutral Colors */
    --gray-50: #FAFAFA;
    --gray-100: #F4F4F5;
    --gray-200: #E4E4E7;
    --gray-300: #D4D4D8;
    --gray-400: #A1A1AA;
    --gray-500: #71717A;
    --gray-600: #52525B;
    --gray-700: #3F3F46;
    --gray-800: #27272A;
    --gray-900: #18181B;
    --white: #FFFFFF;

    /* Semantic Colors */
    --success: #22C55E;
    --warning: #F59E0B;
    --error: #EF4444;
    --info: #3B82F6;

    /* Glassmorphism */
    --glass-bg: rgba(255, 255, 255, 0.8);
    --glass-bg-strong: rgba(255, 255, 255, 0.88);
    --glass-border: 1px solid rgba(255, 255, 255, 0.7);
    --glass-blur: 24px;
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.06);
    --glass-shadow-hover: 0 12px 40px rgba(0, 0, 0, 0.1);

    /* Theme-specific */
    --bg-gradient: linear-gradient(145deg, #E8EEF4 0%, #F0F4F8 50%, #EBF0F6 100%);
    --bg-blobs:
        radial-gradient(ellipse 700px 500px at 8% 15%, rgba(147, 197, 253, 0.4) 0%, transparent 60%),
        radial-gradient(ellipse 600px 450px at 92% 85%, rgba(191, 219, 254, 0.35) 0%, transparent 60%),
        radial-gradient(ellipse 550px 400px at 85% 10%, rgba(59, 130, 246, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse 450px 350px at 45% 55%, rgba(219, 234, 254, 0.3) 0%, transparent 55%);
    --text-primary: var(--gray-900);
    --text-secondary: var(--gray-600);
    --text-muted: var(--gray-500);
    --border-color: var(--gray-200);
    --card-bg: var(--white);
    --input-bg: var(--white);
    --sidebar-border: var(--gray-200);
    --activity-hover: rgba(255, 255, 255, 0.6);
    --activity-icon-bg: var(--gray-100);
    --activity-icon-color: var(--gray-600);
    --ring-bg: var(--gray-200);
    --logo-bg: var(--primary-500);
    --logo-text: var(--gray-900);
    --nav-active-bg: var(--white);
    --nav-hover-bg: rgba(255, 255, 255, 0.8);
    --focus-ring: rgba(59, 130, 246, 0.12);
    --action-hover-shadow: rgba(59, 130, 246, 0.25);
    --notification-border: white;

    /* Typography */
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;

    /* Spacing */
    --radius-sm: 8px;
    --radius-md: 16px;
    --radius-lg: 24px;
    --radius-xl: 32px;

    /* Sidebar */
    --sidebar-width: 280px;

    /* Transition */
    --theme-transition: 0.3s ease;
}

/* ========================================
   DARK THEME - Black/Gold (Brand)
   ======================================== */
[data-theme="dark"] {
    /* Primary Colors - Gold */
    --primary-500: #D4AF37;
    --primary-600: #B8952D;
    --primary-400: #E5C466;
    --primary-100: rgba(212, 175, 55, 0.2);

    /* Neutral Colors - Dark */
    --gray-50: #1A1A1A;
    --gray-100: #F5F5F5;
    --gray-200: #2D2D2D;
    --gray-300: #404040;
    --gray-400: #737373;
    --gray-500: #525252;
    --gray-600: #A3A3A3;
    --gray-700: #D4D4D4;
    --gray-800: #1A1A1A;
    --gray-900: #FFFFFF;
    --white: #0D0D0D;

    /* Glassmorphism - Dark */
    --glass-bg: rgba(20, 20, 20, 0.6);
    --glass-bg-strong: rgba(20, 20, 20, 0.72);
    --glass-border: 1px solid rgba(212, 175, 55, 0.25);
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.5), 0 0 60px rgba(212, 175, 55, 0.05);
    --glass-shadow-hover: 0 12px 40px rgba(212, 175, 55, 0.2), 0 0 80px rgba(212, 175, 55, 0.08);

    /* Theme-specific - Dark with Gold-Glass Background */
    --bg-gradient: linear-gradient(145deg, #0A0A0A 0%, #141414 50%, #0D0D0D 100%);
    --bg-blobs:
        radial-gradient(ellipse 800px 600px at 5% 10%, rgba(212, 175, 55, 0.35) 0%, transparent 55%),
        radial-gradient(ellipse 700px 500px at 95% 90%, rgba(212, 175, 55, 0.3) 0%, transparent 55%),
        radial-gradient(ellipse 600px 450px at 90% 5%, rgba(184, 149, 45, 0.25) 0%, transparent 50%),
        radial-gradient(ellipse 500px 400px at 50% 50%, rgba(212, 175, 55, 0.15) 0%, transparent 60%),
        radial-gradient(ellipse 400px 300px at 20% 80%, rgba(229, 196, 102, 0.2) 0%, transparent 50%),
        radial-gradient(ellipse 350px 250px at 75% 40%, rgba(212, 175, 55, 0.18) 0%, transparent 55%);
    --text-primary: #FFFFFF;
    --text-secondary: #A3A3A3;
    --text-muted: #737373;
    --border-color: rgba(212, 175, 55, 0.2);
    --card-bg: #1A1A1A;
    --input-bg: #1A1A1A;
    --sidebar-border: rgba(212, 175, 55, 0.2);
    --activity-hover: rgba(212, 175, 55, 0.08);
    --activity-icon-bg: rgba(212, 175, 55, 0.1);
    --activity-icon-color: var(--primary-500);
    --ring-bg: #2D2D2D;
    --logo-bg: transparent;
    --logo-text: #FFFFFF;
    --nav-active-bg: rgba(212, 175, 55, 0.15);
    --nav-hover-bg: rgba(212, 175, 55, 0.1);
    --focus-ring: rgba(212, 175, 55, 0.2);
    --action-hover-shadow: rgba(212, 175, 55, 0.3);
    --notification-border: #1A1A1A;
}

/* Reset */
*, *::before, *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Base Styles */
html, body {
    height: 100%;
}

body {
    font-family: var(--font-family);
    background: var(--bg-gradient);
    color: var(--text-primary);
    min-height: 100vh;
    line-height: 1.5;
    position: relative;
    transition: background var(--theme-transition), color var(--theme-transition);
}

/* Background Blobs */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--bg-blobs);
    z-index: 0;
    pointer-events: none;
    transition: background var(--theme-transition);
}

/* Dashboard Layout */
.dashboard {
    display: flex;
    min-height: 100vh;
    position: relative;
    z-index: 1;
}

/* ========================================
   SIDEBAR
   ======================================== */
.sidebar {
    width: var(--sidebar-width);
    background: var(--glass-bg-strong);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: var(--glass-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--glass-shadow);
    display: flex;
    flex-direction: column;
    padding: 24px 16px;
    position: fixed;
    margin: 24px 0 24px 24px;
    height: calc(100vh - 48px);
    z-index: 100;
    transition: background var(--theme-transition), border var(--theme-transition), box-shadow var(--theme-transition);
}

.sidebar-header {
    padding: 0 8px 12px;
    border-bottom: 1px solid var(--sidebar-border);
    margin-bottom: 24px;
    transition: border-color var(--theme-transition);
}

.logo {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2px;
}

.logo-icon {
    width: 40px;
    height: 40px;
    color: var(--primary-500);
    transition: color var(--theme-transition);
}

.logo-text {
    font-size: 32px;
    font-weight: 600;
    color: var(--primary-500);
    transition: color var(--theme-transition);
}

/* Navigation */
.sidebar-nav {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-radius: var(--radius-md);
    color: var(--text-secondary);
    text-decoration: none;
    font-size: 15px;
    font-weight: 500;
    transition: all 0.2s ease;
}

.nav-item:hover {
    background: var(--nav-hover-bg);
    color: var(--text-primary);
}

.nav-item.active {
    background: var(--nav-active-bg);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    color: var(--primary-500);
}

[data-theme="dark"] .nav-item.active {
    border: 1px solid var(--border-color);
    box-shadow: none;
}

.nav-icon {
    width: 22px;
    height: 22px;
    stroke-width: 1.5;
}

/* Sidebar Footer */
.sidebar-footer {
    padding-top: 24px;
    border-top: 1px solid var(--sidebar-border);
    margin-top: auto;
}

.user-profile {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px;
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    margin-bottom: 12px;
}

[data-theme="dark"] .user-profile {
    background: var(--glass-bg);
}

.user-avatar {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    object-fit: cover;
}

.user-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 15px;
}

.logout-btn {
    width: 100%;
    padding: 12px;
    background: var(--card-bg);
    border: 1px solid var(--primary-500);
    border-radius: var(--radius-md);
    color: var(--primary-500);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    font-family: var(--font-family);
}

.logout-btn:hover {
    background: var(--primary-500);
    color: var(--white);
}

[data-theme="dark"] .logout-btn:hover {
    color: #0D0D0D;
}

/* ========================================
   MAIN CONTENT
   ======================================== */
.main-content {
    flex: 1;
    margin-left: calc(var(--sidebar-width) + 48px);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    padding: 24px 24px 32px 0;
}

/* ========================================
   HEADER
   ======================================== */
.header {
    display: flex;
    align-items: center;
    padding: 16px 32px;
    background: var(--glass-bg-strong);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: var(--glass-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--glass-shadow);
    margin-bottom: 32px;
}

.breadcrumb {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-muted);
    font-size: 14px;
}

.breadcrumb .current {
    color: var(--text-primary);
    font-weight: 600;
}

.breadcrumb-separator {
    width: 16px;
    height: 16px;
}

/* Header Actions */
.header-actions {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-left: auto;
}

/* Search Bar */
.search-bar {
    display: flex;
    align-items: center;
    gap: 12px;
    background: var(--input-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: 10px 16px;
    min-width: 320px;
    transition: border-color 0.2s, box-shadow 0.2s;
}

.search-bar:focus-within {
    border-color: var(--primary-500);
    box-shadow: 0 0 0 3px var(--focus-ring);
}

.search-icon {
    width: 18px;
    height: 18px;
    color: var(--text-muted);
}

.search-bar input {
    background: none;
    border: none;
    outline: none;
    color: var(--text-primary);
    font-size: 14px;
    width: 100%;
    font-family: var(--font-family);
}

.search-bar input::placeholder {
    color: var(--text-muted);
}

.search-bar .dropdown {
    margin-left: auto;
    flex-shrink: 0;
}

.search-bar .dropdown-toggle {
    background: none;
    border: none;
    padding: 4px;
    cursor: pointer;
    color: var(--text-muted);
    display: flex;
    align-items: center;
}

.search-bar .dropdown-toggle:hover {
    color: var(--primary-500);
}

.search-bar .dropdown-toggle svg {
    width: 16px;
    height: 16px;
}

/* Dropdown */
.dropdown {
    position: relative;
}

.dropdown-menu {
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: 8px;
    min-width: 160px;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.2s;
    z-index: 100;
    box-shadow: var(--glass-shadow);
}

[data-theme="dark"] .dropdown-menu {
    background: #1A1A1A;
}

.dropdown:hover .dropdown-menu,
.dropdown.open .dropdown-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.dropdown-item {
    display: block;
    padding: 10px 12px;
    color: var(--text-secondary);
    text-decoration: none;
    font-size: 14px;
    border-radius: var(--radius-sm);
    transition: all 0.2s;
}

.dropdown-item:hover {
    background: var(--nav-hover-bg);
    color: var(--primary-500);
}

/* Theme Toggle */
.theme-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 42px;
    height: 42px;
    background: var(--input-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
}

.theme-toggle:hover {
    background: var(--nav-hover-bg);
    color: var(--primary-500);
    border-color: var(--primary-500);
}

.theme-toggle .icon-sun,
.theme-toggle .icon-moon {
    position: absolute;
    width: 20px;
    height: 20px;
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.theme-toggle .icon-sun {
    opacity: 1;
    transform: rotate(0deg);
}

.theme-toggle .icon-moon {
    opacity: 0;
    transform: rotate(-90deg);
}

[data-theme="dark"] .theme-toggle .icon-sun {
    opacity: 0;
    transform: rotate(90deg);
}

[data-theme="dark"] .theme-toggle .icon-moon {
    opacity: 1;
    transform: rotate(0deg);
}

/* Header Buttons */
.header-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 42px;
    height: 42px;
    background: var(--input-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
}

.header-btn:hover {
    background: var(--nav-hover-bg);
    color: var(--primary-500);
    border-color: var(--primary-500);
}

.header-btn svg {
    width: 20px;
    height: 20px;
}

.notification-dot {
    position: absolute;
    top: 6px;
    right: 8px;
    width: 9px;
    height: 9px;
    background: var(--primary-500);
    border-radius: 50%;
    border: 2px solid var(--notification-border);
}

/* Notification Dropdown */
.notification-btn { position: relative; }
.notification-dropdown {
    display: none; position: absolute; top: calc(100% + 8px); right: 0;
    width: 320px; max-height: 400px; background: var(--glass-bg-strong);
    backdrop-filter: blur(var(--glass-blur)); border: 1px solid var(--border-color);
    border-radius: var(--radius-md); box-shadow: var(--glass-shadow); z-index: 200; overflow: hidden;
}
.notification-dropdown.active { display: block; }
.notification-header {
    padding: 16px; border-bottom: 1px solid var(--border-color);
    display: flex; justify-content: space-between; align-items: center;
}
.notification-header h3 { font-size: 14px; font-weight: 600; color: var(--text-primary); }
.notification-header .mark-read {
    font-size: 12px; color: var(--primary-500); cursor: pointer;
    background: none; border: none; font-family: var(--font-family);
}
.notification-header .mark-read:hover { text-decoration: underline; }
.notification-list { max-height: 300px; overflow-y: auto; }
.notification-item {
    padding: 12px 16px; border-bottom: 1px solid var(--border-color);
    cursor: pointer; transition: background 0.2s;
}
.notification-item:hover { background: var(--nav-hover-bg); }
.notification-item:last-child { border-bottom: none; }
.notification-item.unread { background: var(--primary-100); }
[data-theme="dark"] .notification-item.unread { background: rgba(212, 175, 55, 0.1); }
.notification-item .notif-title { font-size: 13px; font-weight: 500; color: var(--text-primary); margin-bottom: 4px; }
.notification-item .notif-desc { font-size: 12px; color: var(--text-secondary); margin-bottom: 4px; }
.notification-item .notif-time { font-size: 11px; color: var(--text-muted); }
.notification-empty { padding: 40px 16px; text-align: center; color: var(--text-muted); font-size: 13px; }

.header-avatar {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    border: 2px solid var(--border-color);
    cursor: pointer;
    transition: border-color 0.2s;
}

.header-avatar:hover {
    border-color: var(--primary-500);
}

/* ========================================
   PAGE CONTENT
   ======================================== */
.page-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 0 16px;
}

.page-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 28px;
}

.page-title {
    font-size: 32px;
    font-weight: 700;
    color: var(--text-primary);
}

/* Stats Bar */
.stats-bar {
    display: flex;
    gap: 16px;
    margin-bottom: 24px;
}

.stat-card {
    flex: 1;
    background: var(--glass-bg-strong);
    backdrop-filter: blur(var(--glass-blur));
    border: var(--glass-border);
    border-radius: var(--radius-md);
    padding: 20px;
    box-shadow: var(--glass-shadow);
    display: flex;
    align-items: center;
    gap: 16px;
}

.stat-icon {
    width: 48px;
    height: 48px;
    background: var(--primary-100);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-500);
}

.stat-icon svg {
    width: 24px;
    height: 24px;
}

.stat-info {
    flex: 1;
}

.stat-value {
    font-size: 28px;
    font-weight: 700;
    color: var(--text-primary);
}

.stat-label {
    font-size: 14px;
    color: var(--text-secondary);
}

/* Filter Bar */
.filter-bar {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 24px;
}

.filter-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    background: var(--glass-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    color: var(--text-secondary);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    font-family: var(--font-family);
}

.filter-btn:hover,
.filter-btn.active {
    background: var(--nav-active-bg);
    color: var(--primary-500);
    border-color: var(--primary-500);
}

.filter-btn svg {
    width: 16px;
    height: 16px;
}

.filter-count {
    background: var(--primary-100);
    color: var(--primary-500);
    font-size: 12px;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 10px;
}

/* ========================================
   CLIENTS TABLE
   ======================================== */
.clients-table-container {
    background: var(--glass-bg-strong);
    backdrop-filter: blur(var(--glass-blur));
    border: var(--glass-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--glass-shadow);
    overflow: hidden;
}

.clients-table {
    width: 100%;
    border-collapse: collapse;
}

.clients-table th,
.clients-table td {
    padding: 16px 20px;
    text-align: left;
}

.clients-table th {
    background: var(--glass-bg);
    font-size: 13px;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom: 1px solid var(--border-color);
}

.clients-table tr {
    border-bottom: 1px solid var(--border-color);
    transition: background 0.2s;
}

.clients-table tr:last-child {
    border-bottom: none;
}

.clients-table tbody tr:hover {
    background: var(--activity-hover);
}

/* Client Cell */
.client-cell {
    display: flex;
    align-items: center;
    gap: 14px;
}

.client-avatar {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background: var(--primary-100);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    color: var(--primary-500);
    font-size: 16px;
}

.client-info {
    display: flex;
    flex-direction: column;
}

.client-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 15px;
}

.client-email {
    font-size: 13px;
    color: var(--text-muted);
}

/* Status Badge */
.status-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    white-space: nowrap;
}

.status-badge.complete {
    background: rgba(34, 197, 94, 0.15);
    color: #22C55E;
}

.status-badge.scheduled {
    background: rgba(245, 158, 11, 0.15);
    color: #F59E0B;
}

.status-badge.failed {
    background: rgba(239, 68, 68, 0.15);
    color: #EF4444;
}

.status-badge.cancelled {
    background: rgba(113, 113, 122, 0.15);
    color: #71717A;
}

.status-badge.rescheduled {
    background: rgba(59, 130, 246, 0.15);
    color: #3B82F6;
}

[data-theme="dark"] .status-badge.rescheduled {
    background: rgba(212, 175, 55, 0.15);
    color: #D4AF37;
}

/* Quality Stars */
.quality-stars {
    display: flex;
    gap: 2px;
}

.quality-stars .star {
    color: var(--ring-bg);
    font-size: 14px;
}

.quality-stars .star.filled {
    color: var(--primary-500);
}

/* Interview Date */
.interview-date {
    font-size: 14px;
    color: var(--text-secondary);
}

.interview-date-sub {
    font-size: 12px;
    color: var(--text-muted);
}

/* Actions Cell */
.actions-cell {
    display: flex;
    gap: 8px;
}

.action-icon-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background: transparent;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.2s;
}

.action-icon-btn:hover {
    background: var(--nav-hover-bg);
    border-color: var(--primary-500);
    color: var(--primary-500);
}

.action-icon-btn.danger:hover {
    background: rgba(239, 68, 68, 0.1);
    border-color: #EF4444;
    color: #EF4444;
}

.action-icon-btn.reschedule {
    border-color: var(--primary-400);
    color: var(--primary-500);
}

.action-icon-btn.reschedule:hover {
    background: var(--primary-100);
}

.action-icon-btn svg {
    width: 16px;
    height: 16px;
}

/* Tooltip */
[data-tooltip] {
    position: relative;
}

[data-tooltip]:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    background: var(--gray-800);
    color: white;
    font-size: 12px;
    font-weight: 500;
    padding: 6px 10px;
    border-radius: var(--radius-sm);
    white-space: nowrap;
    z-index: 100;
}

[data-theme="dark"] [data-tooltip]:hover::after {
    background: #333;
}

/* Empty State */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    text-align: center;
}

.empty-state-icon {
    width: 80px;
    height: 80px;
    background: var(--activity-icon-bg);
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 24px;
}

.empty-state-icon svg {
    width: 40px;
    height: 40px;
    color: var(--text-muted);
}

.empty-state-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.empty-state-text {
    font-size: 15px;
    color: var(--text-secondary);
    max-width: 360px;
}

/* Loading Spinner */
.loading-spinner {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 60px;
}

.spinner {
    width: 40px;
    height: 40px;
    border: 3px solid var(--border-color);
    border-top-color: var(--primary-500);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* ========================================
   MODAL
   ======================================== */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.modal {
    background: var(--card-bg);
    border-radius: var(--radius-lg);
    padding: 32px;
    max-width: 480px;
    width: 90%;
    transform: scale(0.9);
    transition: transform 0.3s ease;
}

.modal-overlay.active .modal {
    transform: scale(1);
}

[data-theme="dark"] .modal {
    background: #1A1A1A;
    border: 1px solid var(--border-color);
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
}

.modal-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
}

.modal-close {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all 0.2s;
}

.modal-close:hover {
    background: var(--activity-hover);
    color: var(--text-primary);
}

.modal-close svg {
    width: 20px;
    height: 20px;
}

.modal-body {
    margin-bottom: 24px;
}

.modal-text {
    font-size: 15px;
    color: var(--text-secondary);
    line-height: 1.6;
}

.modal-footer {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
}

.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 24px;
    border-radius: var(--radius-md);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    font-family: var(--font-family);
    border: none;
}

.btn-secondary {
    background: var(--glass-bg);
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
}

.btn-secondary:hover {
    background: var(--activity-hover);
    color: var(--text-primary);
}

.btn-danger {
    background: #EF4444;
    color: white;
}

.btn-danger:hover {
    background: #DC2626;
}

/* ========================================
   RESPONSIVE
   ======================================== */
@media (max-width: 1200px) {
    .stats-bar {
        flex-wrap: wrap;
    }

    .stat-card {
        flex: 1 1 calc(50% - 8px);
    }

    .search-bar {
        min-width: 280px;
    }
}

/* Mobile Menu Toggle */
.mobile-menu-toggle {
    display: none;
    width: 44px;
    height: 44px;
    border-radius: 12px;
    background: var(--glass-bg);
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    cursor: pointer;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    flex-shrink: 0;
}
.mobile-menu-toggle:hover {
    background: var(--nav-hover-bg);
    color: var(--primary-500);
}
.mobile-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 90;
}
.mobile-overlay.active {
    display: block;
}

@media (max-width: 768px) {
    .mobile-menu-toggle {
        display: flex;
    }
    .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        margin: 16px;
        height: calc(100vh - 32px);
    }

    .sidebar.open {
        transform: translateX(0);
    }

    .main-content {
        margin-left: 0;
        padding: 16px;
    }

    .header {
        padding: 16px;
        margin-bottom: 24px;
        flex-wrap: wrap;
        gap: 12px;
    }

    .header-actions {
        width: 100%;
        justify-content: space-between;
    }

    .search-bar {
        min-width: auto;
        flex: 1;
    }

    .page-content {
        padding: 0;
    }

    .page-title {
        font-size: 24px;
    }

    .stats-bar {
        flex-direction: column;
    }

    .stat-card {
        flex: 1 1 100%;
    }

    .filter-bar {
        flex-wrap: wrap;
    }

    .clients-table-container {
        overflow-x: auto;
    }

    .clients-table {
        min-width: 800px;
    }
}
    </style>
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 26 24" fill="currentColor">
                        <rect x="1" y="9.5" width="2.5" height="5" rx="1.25"/>
                        <rect x="5" y="7" width="2.5" height="10" rx="1.25"/>
                        <rect x="9" y="2" width="2.5" height="20" rx="1.25"/>
                        <rect x="13" y="9" width="2.5" height="6" rx="1.25"/>
                        <rect x="17" y="7" width="2.5" height="10" rx="1.25"/>
                        <rect x="21" y="10" width="2.5" height="4" rx="1.25"/>
                    </svg>
                    <span class="logo-text">Kyber</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <a href="index.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7" rx="1"/>
                        <rect x="14" y="3" width="7" height="7" rx="1"/>
                        <rect x="3" y="14" width="7" height="7" rx="1"/>
                        <rect x="14" y="14" width="7" height="7" rx="1"/>
                    </svg>
                    <span>Overview</span>
                </a>
                <a href="clients.html" class="nav-item active">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                    <span>Clients</span>
                </a>
                <a href="interviews.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                        <line x1="12" y1="19" x2="12" y2="23"/>
                        <line x1="8" y1="23" x2="16" y2="23"/>
                    </svg>
                    <span>Interviews</span>
                </a>
                <a href="knowledge-base.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                    </svg>
                    <span>Knowledge Base</span>
                </a>
                <a href="export-hub.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    <span>Export Hub</span>
                </a>
                <a href="settings.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                    <span>Settings</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <img src="https://ui-avatars.com/api/?name=Jay&background=3B82F6&color=ffffff&size=42" alt="Jay" class="user-avatar" id="sidebarAvatar">
                    <div class="user-info">
                        <span class="user-name">Jay</span>
                    </div>
                </div>
                <button class="logout-btn">Log Out</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="mobile-overlay" id="mobileOverlay" onclick="toggleSidebar()"></div>
            <!-- Header -->
            <header class="header">
                <button class="mobile-menu-toggle" onclick="toggleSidebar()">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
                <div class="breadcrumb">
                    <span>Dashboard</span>
                    <svg class="breadcrumb-separator" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="9 18 15 12 9 6"/>
                    </svg>
                    <span class="current">Clients</span>
                </div>

                <div class="header-actions">
                    <div class="search-bar">
                        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                        </svg>
                        <input type="text" placeholder="Search & Ask..." id="searchInput">
                        <div class="dropdown">
                            <button class="dropdown-toggle">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"/>
                                </svg>
                            </button>
                            <div class="dropdown-menu">
                                <a href="#" class="dropdown-item">Search All</a>
                                <a href="#" class="dropdown-item">Clients Only</a>
                                <a href="#" class="dropdown-item">Knowledge Base</a>
                            </div>
                        </div>
                    </div>

                    <button class="theme-toggle" id="themeToggle" title="Toggle dark mode">
                        <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"/>
                            <line x1="12" y1="1" x2="12" y2="3"/>
                            <line x1="12" y1="21" x2="12" y2="23"/>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                            <line x1="1" y1="12" x2="3" y2="12"/>
                            <line x1="21" y1="12" x2="23" y2="12"/>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                        </svg>
                        <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </button>

                    <button class="header-btn notification-btn" id="notificationBtn" onclick="toggleNotifications(event)">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span class="notification-dot" id="notificationDot"></span>
                        <div class="notification-dropdown" id="notificationDropdown">
                            <div class="notification-header">
                                <h3>Notifications</h3>
                                <button class="mark-read" onclick="markAllRead(event)">Mark all read</button>
                            </div>
                            <div class="notification-list" id="notificationList">
                                <div class="notification-empty">Loading...</div>
                            </div>
                        </div>
                    </button>

                    <img src="https://ui-avatars.com/api/?name=Jay&background=3B82F6&color=ffffff&size=42" alt="User" class="header-avatar" id="headerAvatar">
                </div>
            </header>

            <!-- Page Content -->
            <div class="page-content">
                <div class="page-header">
                    <h1 class="page-title">Clients</h1>
                </div>

                <!-- Stats Bar -->
                <div class="stats-bar">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                <circle cx="9" cy="7" r="4"/>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="totalClients">0</div>
                            <div class="stat-label">Total Clients</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="scheduledCount">0</div>
                            <div class="stat-label">Scheduled</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <polyline points="22 4 12 14.01 9 11.01"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="completedCount">0</div>
                            <div class="stat-label">Completed</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="avgScore">0</div>
                            <div class="stat-label">Avg Quality Score</div>
                        </div>
                    </div>
                </div>

                <!-- Filter Bar -->
                <div class="filter-bar">
                    <button class="filter-btn active" data-filter="all">
                        All
                        <span class="filter-count" id="countAll">0</span>
                    </button>
                    <button class="filter-btn" data-filter="scheduled">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        Scheduled
                    </button>
                    <button class="filter-btn" data-filter="completed">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <polyline points="22 4 12 14.01 9 11.01"/>
                        </svg>
                        Complete
                    </button>
                    <button class="filter-btn" data-filter="failed">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="15" y1="9" x2="9" y2="15"/>
                            <line x1="9" y1="9" x2="15" y2="15"/>
                        </svg>
                        Failed
                    </button>
                    <button class="filter-btn" data-filter="rescheduled">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M23 4v6h-6"/>
                            <path d="M1 20v-6h6"/>
                            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
                        </svg>
                        Rescheduled
                    </button>
                </div>

                <!-- Loading State -->
                <div class="loading-spinner" id="loadingState">
                    <div class="spinner"></div>
                </div>

                <!-- Empty State -->
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-state-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                        </svg>
                    </div>
                    <h3 class="empty-state-title">No clients yet</h3>
                    <p class="empty-state-text">Clients will appear here once they book interviews through Calendly.</p>
                </div>

                <!-- Clients Table -->
                <div class="clients-table-container" id="tableContainer" style="display: none;">
                    <table class="clients-table">
                        <thead>
                            <tr>
                                <th>Client</th>
                                <th>Company</th>
                                <th>Status</th>
                                <th>Quality</th>
                                <th>Interview Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="clientsTableBody">
                            <!-- Rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Delete Client</h3>
                <button class="modal-close" onclick="closeDeleteModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p class="modal-text">Are you sure you want to delete this client and their interview data? This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDeleteModal()">Cancel</button>
                <button class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // MOBILE SIDEBAR TOGGLE
        // ========================================
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobileOverlay');
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        }

        // ========================================
        // CONFIGURATION
        // ========================================
        const SUPABASE_URL = 'https://dpdtxmhxyosunfryocqn.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRwZHR4bWh4eW9zdW5mcnlvY3FuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NDI2NTA0NywiZXhwIjoyMDY5ODQxMDQ3fQ.p_YULPZ0tCCjpDFwqRbkpf1tber8_5Q5kuP7l44ggjw';

        // ========================================
        // STATE
        // ========================================
        let clients = [];
        let filteredClients = [];
        let currentFilter = 'all';
        let searchQuery = '';
        let deleteClientId = null;

        // ========================================
        // THEME TOGGLE
        // ========================================
        const themeToggle = document.getElementById('themeToggle');
        const sidebarAvatar = document.getElementById('sidebarAvatar');
        const headerAvatar = document.getElementById('headerAvatar');

        const savedTheme = localStorage.getItem('kyber-theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        updateAvatars(savedTheme);

        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('kyber-theme', newTheme);
            updateAvatars(newTheme);
        });

        function updateAvatars(theme) {
            const bgColor = theme === 'dark' ? 'D4AF37' : '3B82F6';
            const avatarUrl = `https://ui-avatars.com/api/?name=Jay&background=${bgColor}&color=ffffff&size=42`;
            sidebarAvatar.src = avatarUrl;
            headerAvatar.src = avatarUrl;
        }

        // ========================================
        // NOTIFICATION FUNCTIONALITY
        // ========================================
        document.addEventListener('click', () => {
            const notifDropdown = document.getElementById('notificationDropdown');
            if (notifDropdown) notifDropdown.classList.remove('active');
        });
        function toggleNotifications(e) {
            e.stopPropagation();
            const dropdown = document.getElementById('notificationDropdown');
            dropdown.classList.toggle('active');
            if (dropdown.classList.contains('active')) loadNotifications();
        }
        function markAllRead(e) {
            e.stopPropagation();
            document.querySelectorAll('.notification-item.unread').forEach(item => item.classList.remove('unread'));
            const dot = document.getElementById('notificationDot');
            if (dot) dot.style.display = 'none';
            localStorage.setItem('kyber-notifs-read', Date.now());
        }
        async function loadNotifications() {
            const list = document.getElementById('notificationList');
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/interviews?select=id,client_name,status,created_at&order=created_at.desc&limit=5`, {
                    headers: { 'apikey': SUPABASE_ANON_KEY, 'Authorization': `Bearer ${SUPABASE_ANON_KEY}` }
                });
                const interviews = await response.json();
                if (interviews.length === 0) { list.innerHTML = '<div class="notification-empty">No notifications yet</div>'; return; }
                const lastRead = localStorage.getItem('kyber-notifs-read') || 0;
                let hasUnread = false;
                list.innerHTML = interviews.map(interview => {
                    const isUnread = new Date(interview.created_at).getTime() > lastRead;
                    if (isUnread) hasUnread = true;
                    const timeAgo = getTimeAgo(new Date(interview.created_at));
                    const statusText = interview.status === 'completed' ? 'completed their interview' : interview.status === 'scheduled' ? 'scheduled an interview' : 'updated';
                    return `<div class="notification-item ${isUnread ? 'unread' : ''}" onclick="window.location.href='interviews.html'">
                        <div class="notif-title">${interview.client_name}</div>
                        <div class="notif-desc">${statusText}</div>
                        <div class="notif-time">${timeAgo}</div>
                    </div>`;
                }).join('');
                const dot = document.getElementById('notificationDot');
                if (dot) dot.style.display = hasUnread ? 'block' : 'none';
            } catch (error) { list.innerHTML = '<div class="notification-empty">Failed to load</div>'; }
        }
        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            if (seconds < 60) return 'Just now';
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) return `${minutes}m ago`;
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `${hours}h ago`;
            return `${Math.floor(hours / 24)}d ago`;
        }
        loadNotifications();

        // ========================================
        // DATA FETCHING
        // ========================================
        async function fetchClients() {
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/interviews?select=*&order=scheduled_at.desc`, {
                    headers: {
                        'apikey': SUPABASE_KEY,
                        'Authorization': `Bearer ${SUPABASE_KEY}`
                    }
                });

                if (!response.ok) {
                    throw new Error('Failed to fetch clients');
                }

                clients = await response.json();
                updateStats();
                applyFilters();
                document.getElementById('loadingState').style.display = 'none';

                if (clients.length === 0) {
                    document.getElementById('emptyState').style.display = 'flex';
                } else {
                    document.getElementById('tableContainer').style.display = 'block';
                }
            } catch (error) {
                console.error('Error fetching clients:', error);
                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('emptyState').style.display = 'flex';
                document.querySelector('.empty-state-title').textContent = 'Error loading clients';
                document.querySelector('.empty-state-text').textContent = 'Please check your connection and try again.';
            }
        }

        // ========================================
        // STATS
        // ========================================
        function updateStats() {
            document.getElementById('totalClients').textContent = clients.length;
            document.getElementById('scheduledCount').textContent = clients.filter(c => c.status === 'scheduled').length;
            document.getElementById('completedCount').textContent = clients.filter(c => c.status === 'completed').length;
            document.getElementById('countAll').textContent = clients.length;

            // Calculate average quality score
            const completedClients = clients.filter(c => c.status === 'completed');
            if (completedClients.length > 0) {
                const totalScore = completedClients.reduce((sum, c) => sum + calculateQualityScore(c).stars, 0);
                document.getElementById('avgScore').textContent = (totalScore / completedClients.length).toFixed(1);
            }
        }

        // ========================================
        // FILTERING & SEARCH
        // ========================================
        function applyFilters() {
            filteredClients = clients.filter(client => {
                // Status filter
                let statusMatch = true;
                if (currentFilter === 'completed') {
                    statusMatch = client.status === 'completed';
                } else if (currentFilter === 'scheduled') {
                    statusMatch = client.status === 'scheduled';
                } else if (currentFilter === 'failed') {
                    statusMatch = client.status === 'failed';
                } else if (currentFilter === 'rescheduled') {
                    statusMatch = client.status === 'rescheduled' || client.status === 'cancelled';
                }

                // Search filter
                let searchMatch = true;
                if (searchQuery) {
                    const query = searchQuery.toLowerCase();
                    const companyName = (client.company_name || '').toLowerCase();
                    const clientName = (client.client_name || '').toLowerCase();
                    const clientEmail = (client.client_email || '').toLowerCase();
                    searchMatch = companyName.includes(query) || clientName.includes(query) || clientEmail.includes(query);
                }

                return statusMatch && searchMatch;
            });

            renderClientsTable();
        }

        // Filter button handlers
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
                applyFilters();
            });
        });

        // Search handler
        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchQuery = e.target.value;
            applyFilters();
        });

        // ========================================
        // RENDERING
        // ========================================
        function getStatusBadge(status) {
            const statusMap = {
                'completed': { class: 'complete', icon: '&#10003;', text: 'Complete' },
                'scheduled': { class: 'scheduled', icon: '&#9679;', text: 'Scheduled' },
                'failed': { class: 'failed', icon: '&#10005;', text: 'Failed' },
                'cancelled': { class: 'cancelled', icon: '&#8856;', text: 'Cancelled' },
                'rescheduled': { class: 'rescheduled', icon: '&#8635;', text: 'Rescheduled' }
            };
            const s = statusMap[status] || statusMap['scheduled'];
            return `<span class="status-badge ${s.class}">${s.icon} ${s.text}</span>`;
        }

        function calculateQualityScore(client) {
            let answeredCount = 0;
            const questionFields = [
                'q1_primary_avatar', 'q2_customer_need', 'q3_biggest_mistake',
                'q5_trigger_to_seek', 'q7_cost_of_inaction', 'q8_complaints_to_friends',
                'q9_roles_responsibilities', 'q10_biggest_headache', 'q11_reports_to',
                'q12_decision_influencers', 'q13_success_story', 'q14_why_couldnt_solve_alone',
                'q15_what_already_tried', 'q16_initial_findings', 'q17_recommended_solution',
                'q18_results_achieved'
            ];

            questionFields.forEach(field => {
                if (client[field] && client[field].trim() !== '') {
                    answeredCount++;
                }
            });

            // Check Q4 pain points
            if (client.q4_pain_point_1) answeredCount++;
            if (client.q4_pain_point_2) answeredCount++;
            if (client.q4_pain_point_3) answeredCount++;

            // Check Q6 topics
            if (client.q6_topic_1) answeredCount++;
            if (client.q6_topic_2) answeredCount++;
            if (client.q6_topic_3) answeredCount++;

            const totalPossible = 22;
            const percentage = (answeredCount / totalPossible) * 100;
            return {
                answered: answeredCount,
                total: totalPossible,
                stars: Math.round((percentage / 100) * 5)
            };
        }

        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            const date = new Date(dateString);
            return {
                date: date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }),
                time: date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })
            };
        }

        function renderStars(count) {
            let html = '';
            for (let i = 0; i < 5; i++) {
                html += `<span class="star ${i < count ? 'filled' : ''}">&#9733;</span>`;
            }
            return html;
        }

        function getInitials(name) {
            if (!name) return '?';
            return name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);
        }

        function renderClientsTable() {
            const tbody = document.getElementById('clientsTableBody');
            const emptyState = document.getElementById('emptyState');
            const tableContainer = document.getElementById('tableContainer');

            if (filteredClients.length === 0) {
                tbody.innerHTML = '';
                tableContainer.style.display = 'none';
                emptyState.style.display = 'flex';
                if (searchQuery || currentFilter !== 'all') {
                    document.querySelector('.empty-state-title').textContent = 'No matching clients';
                    document.querySelector('.empty-state-text').textContent = 'Try adjusting your search or filter criteria.';
                }
                return;
            }

            emptyState.style.display = 'none';
            tableContainer.style.display = 'block';

            tbody.innerHTML = filteredClients.map(client => {
                const quality = calculateQualityScore(client);
                const dateInfo = formatDate(client.scheduled_at);
                const canReschedule = client.status === 'scheduled' && client.reschedule_url;

                return `
                    <tr>
                        <td>
                            <div class="client-cell">
                                <div class="client-avatar">${getInitials(client.client_name)}</div>
                                <div class="client-info">
                                    <span class="client-name">${client.client_name || 'Unknown'}</span>
                                    <span class="client-email">${client.client_email || 'No email'}</span>
                                </div>
                            </div>
                        </td>
                        <td>${client.company_name || '-'}</td>
                        <td>${getStatusBadge(client.status)}</td>
                        <td>
                            <div class="quality-stars">${renderStars(quality.stars)}</div>
                        </td>
                        <td>
                            <div class="interview-date">${dateInfo.date}</div>
                            <div class="interview-date-sub">${dateInfo.time}</div>
                        </td>
                        <td>
                            <div class="actions-cell">
                                <button class="action-icon-btn" data-tooltip="View Interview" onclick="viewInterview('${client.id}')">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                        <circle cx="12" cy="12" r="3"/>
                                    </svg>
                                </button>
                                <button class="action-icon-btn" data-tooltip="Export PDF" onclick="exportPDF('${client.id}')">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="7 10 12 15 17 10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                    </svg>
                                </button>
                                ${canReschedule ? `
                                    <button class="action-icon-btn reschedule" data-tooltip="Reschedule" onclick="reschedule('${client.reschedule_url}')">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                            <line x1="16" y1="2" x2="16" y2="6"/>
                                            <line x1="8" y1="2" x2="8" y2="6"/>
                                            <line x1="3" y1="10" x2="21" y2="10"/>
                                            <path d="M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01"/>
                                        </svg>
                                    </button>
                                ` : ''}
                                <button class="action-icon-btn danger" data-tooltip="Delete" onclick="confirmDelete('${client.id}')">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="3 6 5 6 21 6"/>
                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                        <line x1="10" y1="11" x2="10" y2="17"/>
                                        <line x1="14" y1="11" x2="14" y2="17"/>
                                    </svg>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // ========================================
        // ACTIONS
        // ========================================
        function viewInterview(id) {
            window.location.href = `interviews.html?id=${id}`;
        }

        function exportPDF(id) {
            // In production, this would call the n8n webhook
            alert('PDF export will be implemented via n8n webhook. Client ID: ' + id);
        }

        function reschedule(url) {
            if (url) {
                window.open(url, '_blank');
            } else {
                alert('Reschedule URL not available. Please contact support.');
            }
        }

        function confirmDelete(id) {
            deleteClientId = id;
            document.getElementById('deleteModal').classList.add('active');
        }

        function closeDeleteModal() {
            deleteClientId = null;
            document.getElementById('deleteModal').classList.remove('active');
        }

        document.getElementById('confirmDeleteBtn').addEventListener('click', async () => {
            if (!deleteClientId) return;

            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/interviews?id=eq.${deleteClientId}`, {
                    method: 'DELETE',
                    headers: {
                        'apikey': SUPABASE_KEY,
                        'Authorization': `Bearer ${SUPABASE_KEY}`
                    }
                });

                if (response.ok) {
                    clients = clients.filter(c => c.id !== deleteClientId);
                    updateStats();
                    applyFilters();
                    closeDeleteModal();
                } else {
                    throw new Error('Failed to delete');
                }
            } catch (error) {
                console.error('Error deleting client:', error);
                alert('Failed to delete client. Please try again.');
            }
        });

        // Close modal on overlay click
        document.getElementById('deleteModal').addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                closeDeleteModal();
            }
        });

        // ========================================
        // INITIALIZE
        // ========================================
        document.addEventListener('DOMContentLoaded', () => {
            fetchClients();
        });
    </script>
</body>
</html>
